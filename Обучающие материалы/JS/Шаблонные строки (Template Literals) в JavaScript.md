Шаблонные строки — это мощный инструмент для работы с текстом в JavaScript. Они позволяют создавать строки с подстановкой значений, написание многострочных строк и использование выражений прямо внутри строки.

---

### 1. **Как создаются шаблонные строки**

Шаблонные строки создаются с использованием обратных кавычках (``````), а не обычных одинарных (`'`) или двойных (`"`).

#### Пример:

```javascript
let message = `Привет, мир!`;
console.log(message); // "Привет, мир!"
```

---

### 2. **Вставка выражений с помощью `${}`**

Выражения внутри `${}` позволяют подставлять значения переменных, вычисления и функции прямо в строку.

#### Пример:

```javascript
let name = "Иван";
let age = 25;

let greeting = `Меня зовут ${name}, мне ${age} лет.`;
console.log(greeting); // "Меня зовут Иван, мне 25 лет."
```

- Внутри `${}` можно использовать любое JavaScript-выражение:
    
    ```javascript
    console.log(`5 + 5 = ${5 + 5}`); // "5 + 5 = 10"
    console.log(`Случайное число: ${Math.random()}`); // Выведет случайное число
    ```
    

---

### 3. **Многострочные строки**

С шаблонными строками можно легко создавать многострочные строки без использования символов переноса (`\n`).

#### Пример:

```javascript
let text = `Это первая строка.
Это вторая строка.
А это третья строка.`;

console.log(text);
/*
Это первая строка.
Это вторая строка.
А это третья строка.
*/
```

---

### 4. **Вложенные шаблонные строки**

Шаблонные строки можно использовать внутри других шаблонных строк.

#### Пример:

```javascript
let user = "Иван";
let age = 30;

let message = `Привет, ${`меня зовут ${user} и мне ${age} лет.`}`;
console.log(message); // "Привет, меня зовут Иван и мне 30 лет."
```

---

### 5. **Комбинация с обычными строками**

Шаблонные строки можно комбинировать с обычными строками, если это необходимо.

#### Пример:

```javascript
let name = "Анна";
let text = "Добро пожаловать, " + `${name}!`;
console.log(text); // "Добро пожаловать, Анна!"
```

---

### 6. **Использование функций в шаблонных строках**

Вы можете вызывать функции прямо внутри `${}`.

#### Пример:

```javascript
function toUpperCase(word) {
    return word.toUpperCase();
}

let name = "петр";
let greeting = `Привет, ${toUpperCase(name)}!`;
console.log(greeting); // "Привет, ПЕТР!"
```

---

### 7. **Вложенные объекты и массивы**

В шаблонных строках можно обращаться к свойствам объектов и элементам массивов.

#### Пример:

```javascript
let user = { name: "Мария", age: 22 };
let items = ["яблоко", "банан", "груша"];

let message = `Имя: ${user.name}, Возраст: ${user.age}, Любимый фрукт: ${items[0]}`;
console.log(message); // "Имя: Мария, Возраст: 22, Любимый фрукт: яблоко"
```

---

### 8. **Экранирование символов**

Если вам нужно использовать обратную кавычку (`` ` ``) внутри шаблонной строки, её нужно экранировать с помощью обратного слэша (`\`).

#### Пример:

```javascript
let text = `Это обратная кавычка: \``;
console.log(text); // "Это обратная кавычка: `"
```

---

### 9. **Тегированные шаблонные строки (Tagged Templates)**

Тегированные шаблонные строки позволяют вызывать функцию, которая обрабатывает шаблонную строку перед её созданием.

#### Синтаксис:

```javascript
function tag(strings, ...values) {
    console.log(strings); // Массив строк
    console.log(values);  // Массив вставленных значений
    return "Обработанная строка";
}

let name = "Иван";
let age = 25;

let result = tag`Привет, ${name}! Тебе ${age} лет.`;
console.log(result); // "Обработанная строка"
```

#### Пример реального применения:

Функция, экранирующая HTML:

```javascript
function escapeHTML(strings, ...values) {
    return strings.reduce((result, str, i) => {
        let value = values[i] || "";
        value = String(value)
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#39;");
        return result + str + value;
    }, "");
}

let user = "<script>alert('Взлом!')</script>";
let html = escapeHTML`<div>Имя пользователя: ${user}</div>`;
console.log(html); // "<div>Имя пользователя: &lt;script&gt;alert(&#39;Взлом!&#39;)&lt;/script&gt;</div>"
```

---

### 10. **Особенности и ограничения**

1. Шаблонные строки работают только с обратными кавычками (``````), использование одинарных или двойных кавычек приведёт к синтаксической ошибке.
2. Шаблонные строки удобны для динамической генерации HTML, но могут быть опасны, если данные не экранируются (см. выше про экранирование).

---

### 11. **Полезные примеры**

1. **Создание динамического HTML-кода:**

```javascript
let userName = "Иван";
let userAge = 30;

let html = `
<div>
    <h1>Добро пожаловать, ${userName}!</h1>
    <p>Ваш возраст: ${userAge}.</p>
</div>
`;

console.log(html);
```

2. **Форматирование даты:**

```javascript
let date = new Date();
let formattedDate = `Сегодня: ${date.getDate()}.${date.getMonth() + 1}.${date.getFullYear()}`;
console.log(formattedDate); // "Сегодня: 10.12.2024"
```

3. **Вывод многострочного текста с переменными:**

```javascript
let productName = "Ноутбук";
let price = 1500;

let description = `
Товар: ${productName}
Цена: ${price} USD
Доступен в наличии: ${price > 1000 ? "Да" : "Нет"}
`;

console.log(description);
/*
Товар: Ноутбук
Цена: 1500 USD
Доступен в наличии: Да
*/
```

---

### Резюме:

Шаблонные строки — это удобный и гибкий способ работы со строками, который делает код более читаемым и лаконичным. Они позволяют:

- Вставлять переменные и выражения в строки.
- Создавать многострочные строки.
- Писать динамические строки с минимальными усилиями.
- Использовать их в сложных сценариях, например, для создания HTML или обработки данных.